
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ö–Ω–∏–≥–∏ –ø–æ —Ä–∞–∑–Ω—ã–º —Ç–µ–º–∞–º</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    .book { border: 1px solid #ccc; border-radius: 10px; padding: 15px; margin-bottom: 15px; position: relative; }
    .book.favorited { background: #fffbe6; border-color: #ffc107; }
    .fav-button { position: absolute; top: 10px; right: 10px; font-size: 18px; background: none; border: none; color: #aaa; cursor: pointer; }
    .book.favorited .fav-button { color: #e91e63; }
    input { padding: 10px; width: 100%; margin-bottom: 20px; font-size: 16px; }
  </style>
</head>
<body>

<nav style="margin-bottom: 20px;">
  <a href="index.html" style="margin-right: 10px;">üè† –ì–ª–∞–≤–Ω–∞—è</a>
  <a href="cat2.html" style="margin-right: 10px;">üìö –ö–Ω–∏–≥–∏ –Ω–∞ —Ä–∞–∑–Ω—ã–µ —Ç–µ–º—ã</a>
  <a href="cat3.html" style="margin-right: 10px;">üìñ –ö–Ω–∏–≥–∏ –ø–æ –ò—Å—Ç–æ—Ä–∏–∏ –†–µ–ª–∏–≥–∏–∏</a>
  <a href="favorites.html">‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–æ–µ</a>
</nav>


<nav style="margin-bottom: 20px;">
  <a href="index.html" style="margin-right: 10px;">üè† –ì–ª–∞–≤–Ω–∞—è</a>
  <a href="cat2.html" style="margin-right: 10px;">üìö –¢–µ–º—ã</a>
  <a href="cat3.html" style="margin-right: 10px;">üìñ –†–µ–ª–∏–≥–∏—è</a>
  <a href="favorites.html">‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–æ–µ</a>
</nav>

  <!-- –ø–∞—Ä–æ–ª—å —É–¥–∞–ª—ë–Ω -->
<div id="auth" style="display:none;">
    <h2>–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞</h2>
    <input type="password" id="passwordInput" placeholder="–ü–∞—Ä–æ–ª—å...">
  </div>
  <div id="content" style="display:block;">
    <h1>–ö–Ω–∏–≥–∏ –ø–æ —Ä–∞–∑–Ω—ã–º —Ç–µ–º–∞–º</h1>
    <input type="text" id="searchInput" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∫–Ω–∏–≥–∞–º...">
    <div id="bookList"></div>
  </div>


<script>
document.addEventListener('DOMContentLoaded', () => {
  const correctPassword = '2424';
  const auth = document.getElementById('auth');
  const content = document.getElementById('content');
  const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');

  const input = document.getElementById('passwordInput');
  input.addEventListener('keyup', function(e) {
    if (e.key === 'Enter') {
      if (this.value === correctPassword) {
        auth.style.display = 'none';
        content.style.display = 'block';
        if (typeof renderBooks === 'function') renderBooks();
        if (typeof renderFavorites === 'function') renderFavorites();
      } else {
        this.style.borderColor = 'red';
      }
    }
  });

  if (localStorage.getItem('authPassed') === 'true') {
    auth.style.display = 'none';
    content.style.display = 'block';
    if (typeof renderBooks === 'function') renderBooks();
    if (typeof renderFavorites === 'function') renderFavorites();
  }

  window.toggleFavorite = function(btn) {
    const book = btn.closest('.book');
    const id = book.dataset.id;
    const index = favorites.indexOf(id);
    if (index >= 0) {
      favorites.splice(index, 1);
      book.classList.remove('favorited');
    } else {
      favorites.push(id);
      book.classList.add('favorited');
    }
    localStorage.setItem('favorites', JSON.stringify(favorites));
    if (typeof renderFavorites === 'function') renderFavorites();
  }

  window.favorites = favorites;
});
</script>

<script>
function renderBooks() {
  const list = document.getElementById('bookList');
  const filter = document.getElementById('searchInput');
  filter.addEventListener('input', () => {
    const val = filter.value.toLowerCase();
    document.querySelectorAll('.book').forEach(b => {
      b.style.display = b.innerText.toLowerCase().includes(val) ? '' : 'none';
    });
  });
  books.filter(b => parseInt(b.category) === 2).forEach(b => {
    const div = document.createElement('div');
    div.className = 'book';
    div.dataset.id = b.id;
    div.innerHTML = `
      <button class='fav-button' onclick='toggleFavorite(this)'>‚ô•</button>
      <h3>${b.title}</h3>
      <p><strong>–ê–≤—Ç–æ—Ä:</strong> ${b.author}</p>
      <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> ${b.description}</p>
      <p><strong>–¶–µ–Ω–∞:</strong> ${b.price} ‚ÇΩ</p>
    `;
    if (favorites.includes(b.id)) div.classList.add('favorited');
    list.appendChild(div);
  });
}
</script>
<script src="books.js"></script>
</body>
</html>
